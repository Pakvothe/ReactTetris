(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{48:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var r=n(2),c=n(1),o=n.n(c),a=n(14),i=n.n(a),s=(n(48),n(42)),l=n(5),u=n(12),d=n(20),b=(n(66),d.a.initializeApp({apiKey:"AIzaSyD2mst9cYWVZV3EmHUGFc_MJI7sJRCGf2g",authDomain:"tetris-472e2.firebaseapp.com",projectId:"tetris-472e2",storageBucket:"tetris-472e2.appspot.com",messagingSenderId:"314235401049",appId:"1:314235401049:web:e1b89682896d7c1f225248"}));function j(){return d.a.firestore(b)}var f=function(){return Array.from(Array(20),(function(){return Array(12).fill([0,"clear"])}))},m=function(t,e,n){for(var r=n.x,c=n.y,o=0;o<t.tetromino.length;o+=1)for(var a=0;a<t.tetromino[o].length;a+=1)if(0!==t.tetromino[o][a]&&(!e[o+t.pos.y+c]||!e[o+t.pos.y+c][a+t.pos.x+r]||"clear"!==e[o+t.pos.y+c][a+t.pos.x+r][1]))return!0;return!1},p=n(7),x=n(8);function h(){var t=Object(p.a)(["\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\talign-items: flex-start;\n\tjustify-content: center;\n\tpadding: 40px;\n\tmargin: 0 auto;\n\twidth: 100vw;\n\n\t.user_name {\n\t\ttext-align: center;\n\t\tcolor: #ec85e1;\n\t\tletter-spacing: 1px;\n\t}\n\t.user_input {\n\t\twidth: 100%;\n\t\tmax-width: 200px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: rgba(255, 255, 255,0.9);\n\t\tborder: 3px solid #2a9d8f;\n\t\tpadding: 0.5em 1em;\n\t}\n\n\t.box_containers{\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t}\n\taside {\n\t\twidth: 100%;\n\t\tmax-width: 200px;\n\t\tdisplay: block;\n\t\tmargin-right: 3em;\n\t}\n\n\t.info_container{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmargin-left: 3em;\n\t\twidth: 100%;\n\t\talign-items: center;\n\t\n\t\t.box_info{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-around;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder: 3px solid #2a9d8f;\n\t\t\tborder-radius: 20px;\n\t\t\tmargin-bottom: 2em;\n\t\t\tpadding: 1em;\n\t\t\tbackground-color: rgba(42, 157, 143,0.6);\n\t\t\tcolor: white;\n\t\t\twidth: 100%;\n\t\t\t\n\t\t\tp {\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin: -0.1em;\n\t\n\t\t\t\t&:last-child{\n\t\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.controls{\n\t\t\t\tdisplay:flex;\n\t\t\t}\n\n\t\t\ta {\n\t\t\t\tmargin-bottom: 1em;\n\t\t\t\ttext-decoration: none;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-weight: 600;\n\t\n\t\t\t\t&:hover {\n\t\t\t\t\tcolor: #ec85e1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tul {\n\t\t\t\tlist-style: none;\n\t\t\t}\n\n\t\t\tlabel {\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 100%;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\th2{\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t}\n\t\t\th4 {\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t}\n\t\t\t.amarillo{\n\t\t\t\tcolor: #E9C46A;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\tspan {\n\t\t\t\tfont-size: 1.4em;\n\t\t\t}\n\t\t}\n\t}\n"]);return h=function(){return t},t}function O(){var t=Object(p.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: #264653;\n\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%23e76f51' stroke-width='2'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%23e9c46a'%3E%3Ccircle cx='769' cy='229' r='9'/%3E%3Ccircle cx='539' cy='269' r='9'/%3E%3Ccircle cx='603' cy='493' r='9'/%3E%3Ccircle cx='731' cy='737' r='9'/%3E%3Ccircle cx='520' cy='660' r='9'/%3E%3Ccircle cx='309' cy='538' r='9'/%3E%3Ccircle cx='295' cy='764' r='9'/%3E%3Ccircle cx='40' cy='599' r='9'/%3E%3Ccircle cx='102' cy='382' r='9'/%3E%3Ccircle cx='127' cy='80' r='9'/%3E%3Ccircle cx='370' cy='105' r='9'/%3E%3Ccircle cx='578' cy='42' r='9'/%3E%3Ccircle cx='237' cy='261' r='9'/%3E%3Ccircle cx='390' cy='382' r='9'/%3E%3C/g%3E%3C/svg%3E\");\n\toverflow: hidden;\n"]);return O=function(){return t},t}var g=x.a.div(O()),v=x.a.div(h());function y(){var t=Object(p.a)(["\n\tbox-sizing: border-box;\n\tmargin-bottom: 1em;\n\tpadding: 1.5em;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tborder: 3px solid #2A9D8F;\n\tcolor: white;\n\tbackground: rgba(38, 70, 83, 0.7);\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 1rem;\n\toutline: none;\n\tcursor: pointer;\n\ttransition: background .2s ease-in-out;\n\tmargin-top: 1em;\n\n\t&:focus{\n\t\toutline: none;\n \t\tbox-shadow: none;\n\t}\n\t&:hover{\n\t\tbackground: #2a9d8f;\n\t}\n\n\t&.btn-sec{\n\t\tborder: 3px solid #ec85e1;\n\t}\n"]);return y=function(){return t},t}var w=x.a.button(y()),E=function(t){var e=t.callback,n=Object(c.useState)(!0),o=Object(l.a)(n,2),a=o[0],i=o[1];return Object(r.jsx)(w,{onClick:function(){i(!a),e()},children:!0===a?"Start Game":"Reset Game"})},S=n(30),N=n.n(S),_=n(39),C=n.n(_);var k=n(11),T={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},L=function(){var t="IJLOSTZ",e=t[Math.floor(Math.random()*t.length)];return T[e]},M=function(t,e){var n=Object(c.useState)(f()),r=Object(l.a)(n,2),o=r[0],a=r[1],i=Object(c.useState)(0),s=Object(l.a)(i,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){d(0);var n=function(n){var r=n.map((function(t){return t.map((function(t){return"clear"===t[1]?[0,"clear"]:t}))}));return t.tetromino.forEach((function(e,n){e.forEach((function(e,c){0!==e&&(r[n+t.pos.y][c+t.pos.x]=[e,"".concat(t.collided?"merged":"clear")])}))})),t.collided?(e(),function(t){return t.reduce((function(e,n){return-1===n.findIndex((function(t){return 0===t[0]}))?(d((function(t){return t+1})),e.unshift(new Array(t[0].length).fill([0,"clear"])),e):(e.push(n),e)}),[])}(r)):r};a((function(t){return n(t)}))}),[t.collided,t.pos.x,t.pos.y,t.tetromino,e]),[o,a,u]},I="SET_DROP_TIME",A="SET_GAME_OVER",D="SET_CURRENT_PLAYER",R=function(t){return{type:I,payload:t}},F=function(t){return{type:A,payload:t}};function J(){var t=Object(p.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: repeat(\n\t\t",",\n\t\tcalc(25vw / ",")\n\t);\n\tgrid-template-columns: repeat(",", 1fr);\n\tgrid-gap: 1px;\n\tborder: 3px solid #2A9D8F;\n\twidth: 100%;\n\tmax-width: 25vw;\n\tbackground-color: #2A9D8F;\n\tborder-radius: 5px;\n"]);return J=function(){return t},t}var P=x.a.div(J(),(function(t){return t.height}),(function(t){return t.width}),(function(t){return t.width}));function z(){var t=Object(p.a)(["\n  width: auto;\nborder-radius: 4px;\n  background: rgba(",", 0.6);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return z=function(){return t},t}var G=x.a.div(z(),(function(t){return t.color}),(function(t){return 0===t.type?"0px solid":"4px solid"}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),V=function(t){var e=t.type;return Object(r.jsx)(G,{type:e,color:T[e].color})},Z=o.a.memo(V),B=function(t){var e=t.stage;return Object(r.jsx)(P,{width:e[0].length,height:e.length,children:e.map((function(t){return t.map((function(t,e){return Object(r.jsx)(Z,{type:t[0]},e)}))}))})};function U(){var t=Object(p.a)(["\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 1em;\n\tpadding: 20px;\n\tborder: 3px solid #2a9d8f;\n\tmin-height: 30px;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tcolor: ",";\n\tbackground-color: rgba(42, 157, 143,0.6);\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 0.8rem;\n"]);return U=function(){return t},t}var X=x.a.div(U(),(function(t){return t.gameOver?"#ec85e1":"white"})),H=function(t){var e=t.text,n=Object(u.c)((function(t){return t.gameOver}));return Object(r.jsx)(X,{gameOver:n,children:e})},K=n(40),Y=n.n(K);function q(){var t=Object(p.a)(["\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: 20em;\n\t\theight: 20em;\n\t\n\t.css-df17o1{\n\t\tbackground: transparent;\n\t}\n\n\t.loading__spinner {\n\t\twidth: 100px;\n\t\t& svg circle { stroke: #2a9d8f;}\n\t}\n\n\t.spinner{\n\t\tposition: relative;\n\t\ttop: 0;\n\t}\n\n\t.loading__content {\n\t\tposition: absolute;\n\t\ttop: 50px;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tfont-size: 1.2em;\n\t\tfont-weight: 900;\n\t\tcolor: black;\n\t}\n"]);return q=function(){return t},t}var W=Object(x.a)(Y.a)(q()),Q=function(t){var e=t.loading;return Object(r.jsx)(W,{active:e,spinner:!0,text:"Loading...",className:"loading__overlay",classNamePrefix:"loading__"})},$=function(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.dropTime})),n=Object(u.c)((function(t){return t.gameOver})),o=Object(u.c)((function(t){return t.currentPlayer})),a=function(){var t=Object(c.useState)({pos:{x:0,y:0},tetromino:T[0].shape,collided:!1}),e=Object(l.a)(t,2),n=e[0],r=e[1];function o(t,e){var n=t.map((function(e,n){return t.map((function(t){return t[n]}))}));return e>0?n.map((function(t){return t.reverse()})):n.reverse()}var a=Object(c.useCallback)((function(){r({pos:{x:4,y:0},tetromino:L().shape,collided:!1})}),[]);return[n,function(t){var e=t.x,n=t.y,c=t.collided;r((function(t){return Object(k.a)(Object(k.a)({},t),{},{pos:{x:t.pos.x+=e,y:t.pos.y+=n},collided:c})}))},a,function(t,e){var c=JSON.parse(JSON.stringify(n));c.tetromino=o(c.tetromino,e);for(var a=c.pos.x,i=1;m(c,t,{x:0,y:0});)if(c.pos.x+=i,(i=-(i+(i>0?1:-1)))>c.tetromino[0].length)return o(c.tetromino,-e),void(c.pos.x=a);r(c)}]}(),i=Object(l.a)(a,4),b=i[0],p=i[1],x=i[2],h=i[3],O=M(b,x),y=Object(l.a)(O,3),S=y[0],_=y[1],I=function(t){var e=Object(c.useState)(0),n=Object(l.a)(e,2),r=n[0],o=n[1],a=Object(c.useState)(0),i=Object(l.a)(a,2),s=i[0],u=i[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),j=b[0],f=b[1],m=[40,100,300,1200],p=Object(c.useCallback)((function(){t>0&&(o((function(e){return e+m[t-1]*(j+1)})),u((function(e){return e+t})))}),[j,m,t]);return Object(c.useEffect)((function(){p()}),[p,t,r]),[r,o,s,u,j,f]}(y[2]),A=Object(l.a)(I,6),J=A[0],P=A[1],z=A[2],G=A[3],V=A[4],Z=A[5],U=Object(c.useState)(!0),X=Object(l.a)(U,2),K=X[0],Y=X[1],q=Object(c.useState)(0),W=Object(l.a)(q,2),$=W[0],tt=W[1],et=Object(c.useState)([{user:"",number:0},{user:"",number:0},{user:"",number:0}]),nt=Object(l.a)(et,2),rt=nt[0],ct=nt[1];Object(c.useEffect)((function(){var t=j().collection("Tetris666").doc("FrancoTetris");t.get().then((function(e){Y(!1),t.update({visits:d.a.firestore.FieldValue.increment(1)});var n=e.data();tt(n.visits),ct([{user:n.maxName,number:n.maxScore},{user:n.secName,number:n.secScore},{user:n.thirdName,number:n.thirdScore}])}))}),[]),Object(c.useEffect)((function(){if(n){var t={user:o,number:J},e=Object(s.a)(rt);if(J>rt[0].number)e.unshift(t),e.pop(),ct(e);else if(J>rt[1].number){e.pop();var r=e.pop();e.push(t),e.push(r),ct(e)}else J>rt[2].number&&(e.pop(),e.push(t),ct(e));j().collection("Tetris666").doc("FrancoTetris").update({maxName:rt[0].user,maxScore:rt[0].number,secName:rt[1].user,secScore:rt[1].number,thirdName:rt[2].user,thirdScore:rt[2].number}).then((function(){return console.log("rompiste un record")}))}}),[n]);var ot=function(t){m(b,S,{x:t,y:0})||p({x:t,y:0})},at=function(){z>10*(V+1)&&(Z((function(t){return t+1})),t(R(1e3/(V+1)+200))),m(b,S,{x:0,y:1})?(b.pos.y<1&&(t(F(!0)),t(R(null))),p({x:0,y:0,collided:!0})):p({x:0,y:1,collided:!1})};!function(t,e){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=t}),[t]),Object(c.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){clearInterval(t)}}}),[e])}((function(){at()}),e);var it=function(e){var r=e.keyCode;n||(37===r?ot(-1):39===r?ot(1):40===r?(t(R(null)),at()):38===r&&h(S,1))},st=Object(c.useState)(""),lt=Object(l.a)(st,2),ut=lt[0],dt=lt[1];return Object(r.jsx)(r.Fragment,{children:!1===K?Object(r.jsx)(g,{role:"button",tabIndex:"0",onKeyDown:function(t){return it(t)},onKeyUp:function(e){var r=e.keyCode;n||40===r&&t(R(1e3/(V+1)))},children:Object(r.jsxs)(v,{children:[Object(r.jsx)(N.a,{left:!0,children:Object(r.jsxs)("div",{className:"box_containers",children:[Object(r.jsxs)("div",{className:"info_container",children:[Object(r.jsxs)("aside",{className:"box_info",children:[Object(r.jsx)("h2",{children:"Tetris Game"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Developed by"}),Object(r.jsx)("p",{children:"Franco Ortiz"})]}),Object(r.jsx)("a",{href:"https://github.com/Pakvothe/ReactTetris",target:"_blank",rel:"noreferrer",className:"amarillo",children:" ~ Repository ~ "})]}),Object(r.jsxs)("aside",{className:"box_info",children:[Object(r.jsx)("h2",{children:"Controls"}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsx)("span",{className:"amarillo",children:"\u21e7 "}),",  Spin Tetromino"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsx)("span",{className:"amarillo",children:"\u21e9 "}),",  Fast Fall"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsx)("span",{className:"amarillo",children:"\u21e8 "}),",  Right"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsx)("span",{className:"amarillo",children:"\u21e6 "}),",  Left"]})]})]})]}),Object(r.jsxs)("div",{className:"info_container score_container",children:[Object(r.jsxs)("aside",{className:"box_info ",children:[Object(r.jsx)("h2",{children:"Scores"}),Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Max Score"}),Object(r.jsx)("p",{className:"amarillo",children:rt[0].user}),Object(r.jsx)("p",{className:"amarillo",children:rt[0].number})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Second Score"}),Object(r.jsx)("p",{className:"amarillo",children:rt[1].user}),Object(r.jsx)("p",{className:"amarillo",children:rt[1].number})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Third Score"}),Object(r.jsx)("p",{className:"amarillo",children:rt[2].user}),Object(r.jsx)("p",{className:"amarillo",children:rt[2].number})]})]})})]}),Object(r.jsxs)("aside",{className:"box_info ",children:[Object(r.jsx)("h4",{children:"Visitas "}),Object(r.jsx)("p",{className:"amarillo",children:$})]})]})]})}),Object(r.jsx)(B,{stage:S}),Object(r.jsx)(N.a,{right:!0,children:Object(r.jsxs)("aside",{children:[n?Object(r.jsx)(H,{gameOver:n,text:"Game Over"}):Object(r.jsxs)("div",{children:[Object(r.jsx)(H,{text:"Score: ".concat(J)}),Object(r.jsx)(H,{text:"rows: ".concat(z)}),Object(r.jsx)(H,{text:"Level: ".concat(V)}),Object(r.jsx)(H,{text:"Fall Speed: ".concat(Math.round(e)," ms")})]}),Object(r.jsx)("aside",{className:"box_info",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({type:D,payload:ut})},children:[o?Object(r.jsx)("h2",{className:"user_name",children:o}):Object(r.jsx)("input",{className:"user_input",onChange:function(t){dt(t.target.value)},value:ut,type:"text",placeholder:"Player Name",required:!0}),ut.length>2?Object(r.jsx)(E,{type:"submit",callback:function(){_(f()),t(R(1e3)),x(),P(0),Z(0),G(0),t(F(!1))}}):Object(r.jsx)(w,{onClick:function(t){t.preventDefault(),C.a.fire({heightAuto:!1,title:"Error!",text:"Put a player name to play!",icon:"error",confirmButtonText:"Ok",confirmButtonColor:"#ec85e1"})},className:"btn-sec",children:"Start Game"})]})})]})})]})}):Object(r.jsx)(Q,{loading:K})})},tt=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)($,{})})},et=n(18),nt={dropTime:null,gameOver:!1,currentPlayer:""},rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object(k.a)(Object(k.a)({},t),{},{dropTime:e.payload});case A:return Object(k.a)(Object(k.a)({},t),{},{gameOver:e.payload});case D:return Object(k.a)(Object(k.a)({},t),{},{currentPlayer:e.payload});default:return t}},ct=n(41),ot=Object(et.d)(rt,Object(et.c)(Object(et.a)(ct.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(r.jsx)(u.a,{store:ot,children:Object(r.jsx)(tt,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.c0ab594e.chunk.js.map