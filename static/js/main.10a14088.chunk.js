(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{48:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var r=n(2),c=n(1),o=n.n(c),a=n(14),i=n.n(a),s=(n(48),n(42)),l=n(5),u=n(10),d=n(20),b=(n(66),d.a.initializeApp({apiKey:"AIzaSyD2mst9cYWVZV3EmHUGFc_MJI7sJRCGf2g",authDomain:"tetris-472e2.firebaseapp.com",projectId:"tetris-472e2",storageBucket:"tetris-472e2.appspot.com",messagingSenderId:"314235401049",appId:"1:314235401049:web:e1b89682896d7c1f225248"}));function f(){return d.a.firestore(b)}var j=function(){return Array.from(Array(20),(function(){return Array(12).fill([0,"clear"])}))},m=function(t,e,n){for(var r=n.x,c=n.y,o=0;o<t.tetromino.length;o+=1)for(var a=0;a<t.tetromino[o].length;a+=1)if(0!==t.tetromino[o][a]&&(!e[o+t.pos.y+c]||!e[o+t.pos.y+c][a+t.pos.x+r]||"clear"!==e[o+t.pos.y+c][a+t.pos.x+r][1]))return!0;return!1},p=n(7),x=n(8);function h(){var t=Object(p.a)(["\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\talign-items: flex-start;\n\tjustify-content: center;\n\tpadding: 40px;\n\tmargin: 0 auto;\n\twidth: 100vw;\n\n\t.user_name {\n\t\ttext-align: center;\n\t\tcolor: #ec85e1;\n\t\tletter-spacing: 1px;\n\t}\n\t.user_input {\n\t\twidth: 100%;\n\t\tmax-width: 200px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: rgba(255, 255, 255,0.9);\n\t\tborder: 3px solid #2a9d8f;\n\t\tpadding: 0.5em 1em;\n\t}\n\n\t.box_containers{\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t}\n\taside {\n\t\twidth: 100%;\n\t\tmax-width: 200px;\n\t\tdisplay: block;\n\t\tmargin-right: 3em;\n\t}\n\n\t.info_container{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmargin-left: 3em;\n\t\twidth: 100%;\n\t\talign-items: center;\n\t\n\t\t.box_info{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-around;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder: 3px solid #2a9d8f;\n\t\t\tborder-radius: 20px;\n\t\t\tmargin-bottom: 2em;\n\t\t\tpadding: 1em;\n\t\t\tbackground-color: rgba(42, 157, 143,0.6);\n\t\t\tcolor: white;\n\t\t\twidth: 100%;\n\t\t\t\n\t\t\tp {\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin: -0.1em;\n\t\n\t\t\t\t&:last-child{\n\t\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.controls{\n\t\t\t\tdisplay:flex;\n\t\t\t}\n\n\t\t\ta {\n\t\t\t\tmargin-bottom: 1em;\n\t\t\t\ttext-decoration: none;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-weight: 600;\n\t\n\t\t\t\t&:hover {\n\t\t\t\t\tcolor: #ec85e1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tul {\n\t\t\t\tlist-style: none;\n\t\t\t}\n\n\t\t\tlabel {\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 100%;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\th2{\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t}\n\t\t\th4 {\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t}\n\t\t\t.amarillo{\n\t\t\t\tcolor: #E9C46A;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\tspan {\n\t\t\t\tfont-size: 1.4em;\n\t\t\t}\n\t\t}\n\t}\n"]);return h=function(){return t},t}function O(){var t=Object(p.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: #264653;\n\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%23e76f51' stroke-width='2'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%23e9c46a'%3E%3Ccircle cx='769' cy='229' r='9'/%3E%3Ccircle cx='539' cy='269' r='9'/%3E%3Ccircle cx='603' cy='493' r='9'/%3E%3Ccircle cx='731' cy='737' r='9'/%3E%3Ccircle cx='520' cy='660' r='9'/%3E%3Ccircle cx='309' cy='538' r='9'/%3E%3Ccircle cx='295' cy='764' r='9'/%3E%3Ccircle cx='40' cy='599' r='9'/%3E%3Ccircle cx='102' cy='382' r='9'/%3E%3Ccircle cx='127' cy='80' r='9'/%3E%3Ccircle cx='370' cy='105' r='9'/%3E%3Ccircle cx='578' cy='42' r='9'/%3E%3Ccircle cx='237' cy='261' r='9'/%3E%3Ccircle cx='390' cy='382' r='9'/%3E%3C/g%3E%3C/svg%3E\");\n\toverflow: hidden;\n"]);return O=function(){return t},t}var g=x.a.div(O()),v=x.a.div(h()),y="SET_DROP_TIME",w="SET_GAME_OVER",E="SET_CURRENT_PLAYER",C="SET_BUTTON_COUNT",N=function(t){return{type:y,payload:t}},S=function(t){return{type:w,payload:t}},_=function(t){return{type:C,payload:t}};function k(){var t=Object(p.a)(["\n\tbox-sizing: border-box;\n\tmargin-bottom: 1em;\n\tpadding: 1.5em;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tborder: 3px solid #2A9D8F;\n\tcolor: white;\n\tbackground: rgba(38, 70, 83, 0.7);\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 1rem;\n\toutline: none;\n\tcursor: pointer;\n\ttransition: background .2s ease-in-out;\n\tmargin-top: 1em;\n\n\t&:focus{\n\t\toutline: none;\n \t\tbox-shadow: none;\n\t}\n\t&:hover{\n\t\tbackground: #2a9d8f;\n\t}\n\n\t&.btn-sec{\n\t\tborder: 3px solid #ec85e1;\n\t}\n"]);return k=function(){return t},t}var T=x.a.button(k()),L=function(t){var e=t.callback,n=Object(u.b)(),c=Object(u.c)((function(t){return t.buttonCount}));return Object(r.jsx)(T,{onClick:function(){n(_(!c)),e()},children:!0===c?"Start Game":"Reset Game"})},M=n(30),I=n.n(M),A=n(31),J=n.n(A);var z=n(11),P={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},R=function(){var t="IJLOSTZ",e=t[Math.floor(Math.random()*t.length)];return P[e]},F=function(t,e){var n=Object(c.useState)(j()),r=Object(l.a)(n,2),o=r[0],a=r[1],i=Object(c.useState)(0),s=Object(l.a)(i,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){d(0);var n=function(n){var r=n.map((function(t){return t.map((function(t){return"clear"===t[1]?[0,"clear"]:t}))}));return t.tetromino.forEach((function(e,n){e.forEach((function(e,c){0!==e&&(r[n+t.pos.y][c+t.pos.x]=[e,"".concat(t.collided?"merged":"clear")])}))})),t.collided?(e(),function(t){return t.reduce((function(e,n){return-1===n.findIndex((function(t){return 0===t[0]}))?(d((function(t){return t+1})),e.unshift(new Array(t[0].length).fill([0,"clear"])),e):(e.push(n),e)}),[])}(r)):r};a((function(t){return n(t)}))}),[t.collided,t.pos.x,t.pos.y,t.tetromino,e]),[o,a,u]};function B(){var t=Object(p.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: repeat(\n\t\t",",\n\t\tcalc(22vw / ",")\n\t);\n\tgrid-template-columns: repeat(",", 1fr);\n\tgrid-gap: 1px;\n\tborder: 3px solid #2a9d8f;\n\twidth: 100%;\n\tmax-width: 25vw;\n\tmax-height: 90%;\n\tbackground-color: #2a9d8f;\n\tborder-radius: 5px;\n"]);return B=function(){return t},t}var D=x.a.div(B(),(function(t){return t.height}),(function(t){return t.width}),(function(t){return t.width}));function G(){var t=Object(p.a)(["\n  width: auto;\nborder-radius: 4px;\n  background: rgba(",", 0.6);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return G=function(){return t},t}var Z=x.a.div(G(),(function(t){return t.color}),(function(t){return 0===t.type?"0px solid":"4px solid"}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),U=function(t){var e=t.type;return Object(r.jsx)(Z,{type:e,color:P[e].color})},V=o.a.memo(U),H=function(t){var e=t.stage;return Object(r.jsx)(D,{width:e[0].length,height:e.length,children:e.map((function(t){return t.map((function(t,e){return Object(r.jsx)(V,{type:t[0]},e)}))}))})};function K(){var t=Object(p.a)(["\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 1em;\n\tpadding: 20px;\n\tborder: 3px solid #2a9d8f;\n\tmin-height: 30px;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tcolor: ",";\n\tbackground-color: rgba(42, 157, 143,0.6);\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 0.8rem;\n"]);return K=function(){return t},t}var Y=x.a.div(K(),(function(t){return t.gameOver?"#ec85e1":"white"})),q=function(t){var e=t.text,n=Object(u.c)((function(t){return t.gameOver}));return Object(r.jsx)(Y,{gameOver:n,children:e})},W=n(40),X=n.n(W);function Q(){var t=Object(p.a)(["\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: 20em;\n\t\theight: 20em;\n\t\n\t.css-df17o1{\n\t\tbackground: transparent;\n\t}\n\n\t.loading__spinner {\n\t\twidth: 100px;\n\t\t& svg circle { stroke: #2a9d8f;}\n\t}\n\n\t.spinner{\n\t\tposition: relative;\n\t\ttop: 0;\n\t}\n\n\t.loading__content {\n\t\tposition: absolute;\n\t\ttop: 50px;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tfont-size: 1.2em;\n\t\tfont-weight: 900;\n\t\tcolor: black;\n\t}\n"]);return Q=function(){return t},t}var $=Object(x.a)(X.a)(Q()),tt=function(t){var e=t.loading;return Object(r.jsx)($,{active:e,spinner:!0,text:"Loading...",className:"loading__overlay",classNamePrefix:"loading__"})},et=function(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.dropTime})),n=Object(u.c)((function(t){return t.gameOver})),o=Object(u.c)((function(t){return t.currentPlayer})),a=function(){var t=Object(c.useState)({pos:{x:0,y:0},tetromino:P[0].shape,collided:!1}),e=Object(l.a)(t,2),n=e[0],r=e[1];function o(t,e){var n=t.map((function(e,n){return t.map((function(t){return t[n]}))}));return e>0?n.map((function(t){return t.reverse()})):n.reverse()}var a=Object(c.useCallback)((function(){r({pos:{x:4,y:0},tetromino:R().shape,collided:!1})}),[]);return[n,function(t){var e=t.x,n=t.y,c=t.collided;r((function(t){return Object(z.a)(Object(z.a)({},t),{},{pos:{x:t.pos.x+=e,y:t.pos.y+=n},collided:c})}))},a,function(t,e){var c=JSON.parse(JSON.stringify(n));c.tetromino=o(c.tetromino,e);for(var a=c.pos.x,i=1;m(c,t,{x:0,y:0});)if(c.pos.x+=i,(i=-(i+(i>0?1:-1)))>c.tetromino[0].length)return o(c.tetromino,-e),void(c.pos.x=a);r(c)}]}(),i=Object(l.a)(a,4),b=i[0],p=i[1],x=i[2],h=i[3],O=F(b,x),y=Object(l.a)(O,3),w=y[0],C=y[1],k=function(t){var e=Object(c.useState)(0),n=Object(l.a)(e,2),r=n[0],o=n[1],a=Object(c.useState)(0),i=Object(l.a)(a,2),s=i[0],u=i[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),f=b[0],j=b[1],m=[40,100,300,1200],p=Object(c.useCallback)((function(){t>0&&(o((function(e){return e+m[t-1]*(f+1)})),u((function(e){return e+t})))}),[f,m,t]);return Object(c.useEffect)((function(){p()}),[p,t,r]),[r,o,s,u,f,j]}(y[2]),M=Object(l.a)(k,6),A=M[0],B=M[1],D=M[2],G=M[3],Z=M[4],U=M[5],V=Object(c.useState)(!0),K=Object(l.a)(V,2),Y=K[0],W=K[1],X=Object(c.useState)(0),Q=Object(l.a)(X,2),$=Q[0],et=Q[1],nt=Object(c.useState)([{user:"",number:0},{user:"",number:0},{user:"",number:0}]),rt=Object(l.a)(nt,2),ct=rt[0],ot=rt[1];Object(c.useEffect)((function(){var t=f().collection("Tetris666").doc("FrancoTetris");t.get().then((function(e){W(!1),t.update({visits:d.a.firestore.FieldValue.increment(1)});var n=e.data();et(n.visits),ot([{user:n.maxName,number:n.maxScore},{user:n.secName,number:n.secScore},{user:n.thirdName,number:n.thirdScore}])}))}),[]),Object(c.useEffect)((function(){if(n){var e={user:o,number:A},r=Object(s.a)(ct);if(A>ct[0].number)r.unshift(e),r.pop(),ot(r);else if(A>ct[1].number){r.pop();var c=r.pop();r.push(e),r.push(c),ot(r)}else A>ct[2].number&&(r.pop(),r.push(e),ot(r));f().collection("Tetris666").doc("FrancoTetris").update({maxName:r[0].user,maxScore:r[0].number,secName:r[1].user,secScore:r[1].number,thirdName:r[2].user,thirdScore:r[2].number}).then((function(){return t(_(!0))})).then(J.a.fire({heightAuto:!1,title:"New Score",text:"Congratz you beat a new score!",icon:"success",confirmButtonText:"Ok",confirmButtonColor:"#ec85e1"})).then()}}),[n,t,o,A]);var at=function(t){m(b,w,{x:t,y:0})||p({x:t,y:0})},it=function(){D>10*(Z+1)&&(U((function(t){return t+1})),t(N(1e3/(Z+1)+200))),m(b,w,{x:0,y:1})?(b.pos.y<1&&(t(S(!0)),t(N(null))),p({x:0,y:0,collided:!0})):p({x:0,y:1,collided:!1})};!function(t,e){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=t}),[t]),Object(c.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){clearInterval(t)}}}),[e])}((function(){it()}),e);var st=function(e){var r=e.keyCode;n||(37===r?at(-1):39===r?at(1):40===r?(t(N(null)),it()):38===r&&h(w,1))},lt=Object(c.useState)(""),ut=Object(l.a)(lt,2),dt=ut[0],bt=ut[1];return Object(r.jsx)(r.Fragment,{children:!1===Y?Object(r.jsx)(g,{role:"button",tabIndex:"0",onKeyDown:function(t){return st(t)},onKeyUp:function(e){var r=e.keyCode;n||40===r&&t(N(1e3/(Z+1)))},children:Object(r.jsxs)(v,{children:[Object(r.jsx)(I.a,{left:!0,children:Object(r.jsxs)("div",{className:"box_containers",children:[Object(r.jsxs)("div",{className:"info_container",children:[Object(r.jsxs)("aside",{className:"box_info",children:[Object(r.jsx)("h2",{children:"Tetris Game"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Developed by"}),Object(r.jsx)("p",{children:"Franco Ortiz"})]}),Object(r.jsxs)("a",{href:"https://github.com/Pakvothe/ReactTetris",target:"_blank",rel:"noreferrer",className:"amarillo",children:[" ","~ Repository ~"," "]})]}),Object(r.jsxs)("aside",{className:"box_info",children:[Object(r.jsx)("h2",{children:"Controls"}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsxs)("span",{className:"amarillo",children:["\u21e7"," "]}),", Spin Tetromino"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsxs)("span",{className:"amarillo",children:["\u21e9"," "]}),", Fast Fall"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsxs)("span",{className:"amarillo",children:["\u21e8"," "]}),", Right"]}),Object(r.jsxs)("p",{className:"controls",children:[Object(r.jsxs)("span",{className:"amarillo",children:["\u21e6"," "]}),", Left"]})]})]})]}),Object(r.jsxs)("div",{className:"info_container score_container",children:[Object(r.jsxs)("aside",{className:"box_info ",children:[Object(r.jsx)("h2",{children:"Scores"}),Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Max Score"}),Object(r.jsx)("p",{className:"amarillo",children:ct[0].user}),Object(r.jsx)("p",{className:"amarillo",children:ct[0].number})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Second Score"}),Object(r.jsx)("p",{className:"amarillo",children:ct[1].user}),Object(r.jsx)("p",{className:"amarillo",children:ct[1].number})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("h4",{children:"Third Score"}),Object(r.jsx)("p",{className:"amarillo",children:ct[2].user}),Object(r.jsx)("p",{className:"amarillo",children:ct[2].number})]})]})})]}),Object(r.jsxs)("aside",{className:"box_info ",children:[Object(r.jsx)("h4",{children:"Visits"}),Object(r.jsx)("p",{className:"amarillo",children:$})]})]})]})}),Object(r.jsx)(H,{stage:w}),Object(r.jsx)(I.a,{right:!0,children:Object(r.jsxs)("aside",{children:[n?Object(r.jsx)(q,{text:"Game Over"}):Object(r.jsxs)("div",{children:[Object(r.jsx)(q,{text:"Score: ".concat(A)}),Object(r.jsx)(q,{text:"rows: ".concat(D)}),Object(r.jsx)(q,{text:"Level: ".concat(Z)}),Object(r.jsx)(q,{text:"Speed: ".concat(Math.round(e)," ms")})]}),Object(r.jsx)("aside",{className:"box_info",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({type:E,payload:dt})},children:[o?Object(r.jsx)("h2",{className:"user_name",children:o}):Object(r.jsx)("input",{className:"user_input",onChange:function(t){bt(t.target.value)},value:dt,type:"text",placeholder:"Player Name",required:!0}),dt.length>2?Object(r.jsx)(L,{type:"submit",callback:function(){C(j()),t(N(1e3)),x(),B(0),U(0),G(0),t(_(!1)),t(S(!1))}}):Object(r.jsx)(T,{onClick:function(t){t.preventDefault(),J.a.fire({heightAuto:!1,title:"Error!",text:"Put a player name to play!",icon:"error",confirmButtonText:"Ok",confirmButtonColor:"#ec85e1"})},className:"btn-sec",children:"Start Game"})]})})]})})]})}):Object(r.jsx)(tt,{loading:Y})})},nt=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(et,{})})},rt=n(19),ct={dropTime:null,gameOver:!1,currentPlayer:"",buttonCount:!0},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(z.a)(Object(z.a)({},t),{},{dropTime:e.payload});case w:return Object(z.a)(Object(z.a)({},t),{},{gameOver:e.payload});case E:return Object(z.a)(Object(z.a)({},t),{},{currentPlayer:e.payload});case C:return Object(z.a)(Object(z.a)({},t),{},{buttonCount:e.payload});default:return t}},at=n(41),it=Object(rt.c)(ot,Object(rt.a)(at.a));i.a.render(Object(r.jsx)(u.a,{store:it,children:Object(r.jsx)(nt,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.10a14088.chunk.js.map